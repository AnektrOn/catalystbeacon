/* Glassmorphism Design System - Accurate to Image */

/* Background - Indoor living space */
.bg-indoor-background {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800"><defs><filter id="blur"><feGaussianBlur stdDeviation="8"/></filter></defs><rect width="1200" height="800" fill="%23f5f3f0"/><rect x="0" y="0" width="400" height="800" fill="%23e8e4d8"/><rect x="400" y="200" width="200" height="400" fill="%23d4c4a8"/><rect x="600" y="100" width="300" height="600" fill="%23c9b99a"/><rect x="900" y="0" width="300" height="800" fill="%23b8a082"/></svg>');
  background-size: cover;
  background-position: center;
}

/* Base glass effect - Enhanced blur and saturation */
.glass-effect {
  background: color-mix(in srgb, var(--bg-primary, rgba(255, 255, 255, 0.95)) 8%, transparent);
  backdrop-filter: blur(16px) saturate(180%);
  -webkit-backdrop-filter: blur(16px) saturate(180%);
  border: 1px solid color-mix(in srgb, var(--color-primary, #B4833D) 20%, rgba(255, 255, 255, 0.2));
  box-shadow:
    0 8px 32px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 color-mix(in srgb, var(--color-primary, #B4833D) 10%, rgba(255, 255, 255, 0.2));
}

/* Dark mode glass effect */
.dark .glass-effect {
  background: color-mix(in srgb, var(--bg-secondary, rgba(0, 0, 0, 0.8)) 25%, transparent);
  border: 1px solid color-mix(in srgb, var(--color-primary, #B4833D) 15%, rgba(255, 255, 255, 0.1));
  box-shadow:
    0 8px 32px rgba(0, 0, 0, 0.6),
    inset 0 1px 0 color-mix(in srgb, var(--color-primary, #B4833D) 5%, rgba(255, 255, 255, 0.05));
}

/* Header - Premium Slim Glass Strip */
.glass-header-browser {
  @apply glass-effect;
  @apply flex items-center justify-between px-6 py-2;
  color: var(--text-primary, #333);
  border-radius: 100px;
  height: 60px;
  width: 95%;
  /* Mobile width */
  margin: 16px auto;
  backdrop-filter: blur(20px);
  background: color-mix(in srgb, var(--bg-primary, rgba(255, 255, 255, 0.95)) 85%, transparent) !important;
  border: 1px solid color-mix(in srgb, var(--color-primary, #B4833D) 30%, rgba(255, 255, 255, 0.3)) !important;
  box-shadow: 0 10px 30px color-mix(in srgb, var(--color-primary, #B4833D) 20%, rgba(0, 0, 0, 0.1));
}

@media (min-width: 1024px) {
  .glass-header-browser {
    width: 70%;
    /* Desktop width */
  }
}

.glass-icon-btn {
  @apply p-2 rounded-lg;
  color: var(--text-secondary, #666);
  @apply hover:bg-white/20 dark:hover:bg-white/10;
  @apply transition-all duration-200;
  @apply backdrop-blur-sm;
  @apply w-8 h-8;
  @apply flex items-center justify-center;
}

.glass-url-bar {
  @apply glass-effect;
  @apply flex items-center space-x-3 px-4 py-2;
  @apply rounded-lg;
  @apply w-full;
  @apply text-gray-700 dark:text-gray-300;
  height: 36px;
}

/* Sidebar - Expandable vertical panel */
.glass-sidebar-panel {
  @apply glass-effect;
  @apply flex flex-col;
  @apply h-full;
  color: var(--text-primary, #333);
  border-radius: 24px;
  padding: 16px 12px;
  width: var(--sidebar-width-collapsed);
  margin: 16px;
  transition: width var(--sidebar-transition);
  background: color-mix(in srgb, var(--bg-primary, rgba(255, 255, 255, 0.95)) 85%, transparent) !important;
  overflow: hidden;
  border: 1px solid color-mix(in srgb, var(--color-primary, #B4833D) 30%, rgba(255, 255, 255, 0.3)) !important;
}

.glass-sidebar-panel.expanded {
  width: var(--sidebar-width-expanded);
  align-items: flex-start;
}

.glass-sidebar-panel.collapsed {
  width: var(--sidebar-width-collapsed);
  align-items: center;
}

/* Version 2 Sidebar to force refresh */
.glass-sidebar-panel-v2 {
  @apply glass-effect;
  @apply flex flex-col;
  @apply h-full;
  color: var(--text-primary, #333);
  border-radius: 24px;
  padding: 16px 12px;
  width: var(--sidebar-width-collapsed);
  margin: 16px;
  transition: width var(--sidebar-transition);
  background: color-mix(in srgb, var(--bg-primary, rgba(255, 255, 255, 0.95)) 85%, transparent) !important;
  overflow: hidden;
  border: 1px solid color-mix(in srgb, var(--color-primary, #B4833D) 30%, rgba(255, 255, 255, 0.3)) !important;
}

.glass-sidebar-panel-v2.expanded {
  width: var(--sidebar-width-expanded);
  align-items: flex-start;
}

.glass-sidebar-panel-v2.collapsed {
  width: var(--sidebar-width-collapsed);
  align-items: center;
}

.glass-sidebar-panel-v2.expanded .glass-nav-label {
  opacity: 1;
}

.glass-toggle-btn {
  @apply flex items-center justify-center;
  @apply p-2 rounded-lg;
  @apply cursor-pointer;
  @apply transition-all duration-200;
  background: color-mix(in srgb, var(--color-primary, #B4833D) 15%, transparent);
  border: 1px solid color-mix(in srgb, var(--color-primary, #B4833D) 30%, transparent);
}

.glass-toggle-btn:hover {
  background: color-mix(in srgb, var(--color-primary, #B4833D) 25%, transparent);
  transform: scale(1.05);
}

.glass-nav-btn {
  @apply p-3 rounded-xl;
  color: var(--text-secondary, #666);
  @apply transition-all duration-200;
  @apply backdrop-blur-sm;
  @apply flex items-center gap-3;
  @apply w-full;
  min-height: 48px;
  position: relative;
}

.glass-nav-btn:hover {
  background: color-mix(in srgb, var(--color-primary, #B4833D) 10%, transparent);
  transform: translateX(2px);
}

.glass-nav-btn-active {
  background: var(--gradient-primary);
  color: var(--text-primary, #fff);
  box-shadow: 0 4px 12px color-mix(in srgb, var(--color-primary, #B4833D) 40%, transparent);
  transform: translateX(4px);
  @apply p-3 rounded-xl;
  @apply flex items-center gap-3;
  @apply w-full;
  min-height: 48px;
}

.glass-nav-label {
  @apply text-sm font-medium;
  white-space: nowrap;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.glass-sidebar-panel.expanded .glass-nav-label {
  opacity: 1;
}

.glass-theme-toggle {
  @apply flex flex-col items-center space-y-2;
  @apply p-2 rounded-xl;
  @apply bg-white/10;
  @apply backdrop-blur-sm;
}

.glass-theme-btn {
  @apply p-2 rounded-lg;
  @apply text-gray-500 dark:text-gray-400;
  @apply hover:bg-white/20 dark:hover:bg-white/10;
  @apply transition-all duration-200;
  @apply backdrop-blur-sm;
  @apply w-8 h-8;
  @apply flex items-center justify-center;
}

.glass-theme-btn-active {
  background: color-mix(in srgb, var(--color-primary, #B4833D) 30%, transparent);
  color: var(--color-dark-goldenrod);
}

/* User Profile Dropdown */
.glass-user-avatar {
  @apply w-10 h-10 rounded-full;
  @apply cursor-pointer;
  @apply transition-all duration-200;
  @apply border-2;
  border-color: var(--color-dark-goldenrod);
  box-shadow: 0 2px 8px color-mix(in srgb, var(--color-primary, #B4833D) 30%, transparent);
}

.glass-user-avatar:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px color-mix(in srgb, var(--color-primary, #B4833D) 50%, transparent);
}

.glass-user-dropdown {
  @apply glass-effect;
  @apply absolute right-0 mt-4;
  @apply rounded-2xl;
  @apply py-2;
  @apply min-w-[220px];
  @apply shadow-2xl;
  @apply z-50;
  background: color-mix(in srgb, var(--color-old-lace, #F7F1E1) 80%, transparent);
  backdrop-filter: blur(24px);
  border: 1px solid rgba(255, 255, 255, 0.4);
  animation: dropdownSlide 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.dark .glass-user-dropdown {
  background: color-mix(in srgb, var(--color-earth-green, #3F3F2C) 80%, transparent);
}

@keyframes dropdownSlide {
  from {
    opacity: 0;
    transform: translateY(-10px) scale(0.95);
  }

  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.glass-dropdown-item {
  @apply px-4 py-3;
  @apply flex items-center gap-3;
  @apply text-sm font-medium;
  @apply transition-all duration-200;
  @apply cursor-pointer;
  color: var(--color-kobicha);
  position: relative;
  overflow: hidden;
}

.glass-dropdown-item:hover {
  background: color-mix(in srgb, var(--color-primary, #B4833D) 10%, transparent);
  padding-left: 20px;
}

.dark .glass-dropdown-item {
  color: var(--color-bone);
}

.glass-dropdown-divider {
  @apply my-2 mx-4;
  @apply border-t;
  border-color: color-mix(in srgb, var(--color-primary, #B4833D) 15%, transparent);
}

.glass-dropdown-header {
  @apply px-4 py-4;
  @apply border-b;
  border-color: color-mix(in srgb, var(--color-primary, #B4833D) 15%, transparent);
}

/* Notification Badge */
.glass-notification-badge {
  @apply absolute;
  @apply w-4 h-4;
  @apply rounded-full;
  @apply flex items-center justify-center;
  @apply text-[9px] font-bold;
  @apply text-white;
  background: linear-gradient(135deg, #ef4444 0%, #b91c1c 100%);
  box-shadow: 0 2px 8px rgba(239, 68, 68, 0.5);
  top: -2px;
  right: -2px;
  border: 1px solid rgba(255, 255, 255, 0.5);
  animation: badgePulse 3s infinite;
}

@keyframes badgePulse {

  0%,
  100% {
    transform: scale(1);
    box-shadow: 0 2px 8px rgba(239, 68, 68, 0.5);
  }

  50% {
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.7);
  }
}

.glass-notification-dot {
  @apply absolute;
  @apply w-2 h-2;
  @apply rounded-full;
  background: #ef4444;
  top: 0;
  right: 0;
  animation: dotPulse 2s infinite;
}

@keyframes dotPulse {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.6;
  }
}


/* Main Content Panel - Large glass panel */
.glass-main-panel {
  @apply glass-effect;
  @apply rounded-2xl;
  @apply p-8;
  @apply h-full;
  color: var(--text-primary, #333);
  @apply overflow-auto;
  margin: 16px;
  border: none !important;
  background: color-mix(in srgb, var(--bg-primary) 50%, transparent) !important;
  box-shadow: none;
  /* Let the background shine through */
}

/* Custom scrollbar for glass panels */
.glass-main-panel::-webkit-scrollbar {
  width: 6px;
}

.glass-main-panel::-webkit-scrollbar-track {
  background: color-mix(in srgb, var(--bg-primary) 10%, transparent);
  border-radius: 3px;
}

.glass-main-panel::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--color-primary) 30%, transparent);
  border-radius: 3px;
}

.glass-main-panel::-webkit-scrollbar-thumb:hover {
  background: color-mix(in srgb, var(--color-primary) 50%, transparent);
}

/* Responsive Design */
@media (max-width: 1023px) {
  .glass-header-browser {
    width: 100%;
    border-radius: 0;
    margin: 0;
    padding: 12px 16px;
    height: 56px;
  }

  .glass-sidebar-panel {
    display: none;
  }

  .glass-main-panel {
    left: 0;
    right: 0;
    top: 56px;
    bottom: 70px;
    margin: 0;
    border-radius: 0;
    padding: 16px;
  }
}

@media (max-width: 767px) {
  .glass-header-browser {
    padding: 8px 12px;
    height: 52px;
  }

  .glass-main-panel {
    padding: 12px;
  }

  /* Make glassmorphism more subtle on mobile for better readability */
  .glass-effect {
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  .dark .glass-effect {
    background: rgba(0, 0, 0, 0.35);
  }
}

/* Fallback when backdrop-filter is not supported */
@supports not ((backdrop-filter: blur(2px)) or (-webkit-backdrop-filter: blur(2px))) {
  .glass-effect {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }

  .dark .glass-effect {
    background: rgba(0, 0, 0, 0.8);
  }
}

/* Animation for smooth transitions */
@keyframes glassFloat {

  0%,
  100% {
    transform: translateY(0px);
  }

  50% {
    transform: translateY(-1px);
  }
}

.glass-effect {
  animation: glassFloat 8s ease-in-out infinite;
}

/* Focus states for accessibility */
.glass-icon-btn:focus,
.glass-nav-btn:focus,
.glass-theme-btn:focus {
  @apply outline-none;
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--color-primary) 50%, transparent);
  @apply ring-offset-2 ring-offset-transparent;
}

/* Enhanced glassmorphism for better visual depth */
.glass-effect::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: inherit;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0.1));
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: exclude;
  -webkit-mask-composite: xor;
  pointer-events: none;
}

/* ==================== MASTERY COMPONENTS ==================== */

/* Tab Navigation */
.glass-tab-navigation {
  @apply glass-effect;
  @apply rounded-xl;
  @apply p-2;
  @apply mb-6;
}

.glass-tab-btn {
  @apply px-4 py-2 rounded-lg;
  color: var(--text-secondary, #666);
  @apply hover:bg-white/20 dark:hover:bg-white/10;
  @apply transition-all duration-200;
  @apply backdrop-blur-sm;
  @apply flex items-center;
  @apply font-medium;
}

.glass-tab-btn-active {
  @apply bg-white/30 dark:bg-white/20;
  color: var(--color-primary);
  @apply shadow-lg;
}

/* Tab Content */
.glass-tab-content {
  @apply min-h-96;
}

/* Cards */
.glass-card,
.glass-panel {
  @apply glass-effect;
  @apply rounded-xl;
  @apply p-6;
  color: var(--text-primary, #333);
}

/* Calendar Components */
.glass-calendar-day {
  @apply p-2 min-h-16;
  @apply border border-white/20;
  @apply rounded-lg;
  @apply cursor-pointer;
  @apply hover:bg-white/10;
  @apply transition-all duration-200;
  @apply flex flex-col;
  color: var(--text-primary, #333);
}

.glass-calendar-day-today {
  background-color: color-mix(in srgb, var(--color-primary) 20%, transparent);
  border-color: color-mix(in srgb, var(--color-primary) 30%, transparent);
}

/* Event Items */
.glass-event-item {
  @apply glass-effect;
  @apply rounded-lg;
  @apply p-4;
  @apply border border-white/20;
  @apply hover:bg-white/10;
  @apply transition-all duration-200;
}

.glass-completion-btn {
  @apply p-1 rounded-full;
  @apply hover:bg-white/20;
  @apply transition-all duration-200;
  @apply cursor-pointer;
}

.glass-delete-btn {
  @apply p-2 rounded-lg;
  @apply text-red-500;
  @apply hover:bg-red-500/20;
  @apply transition-all duration-200;
  @apply cursor-pointer;
}

/* Habit Cards */
.glass-habit-card {
  @apply glass-effect;
  @apply rounded-xl;
  @apply p-6;
  @apply border border-white/20;
  @apply hover:bg-white/10;
  @apply transition-all duration-200;
}

/* Toolbox Cards */
.glass-toolbox-card {
  @apply glass-effect;
  @apply rounded-xl;
  @apply p-6;
  @apply border border-white/20;
  @apply hover:bg-white/10;
  @apply transition-all duration-200;
}

.glass-difficulty-badge {
  @apply px-2 py-1 rounded-full;
  @apply text-xs font-medium;
  background-color: color-mix(in srgb, var(--color-primary) 20%, transparent);
  color: var(--color-primary);
  border: 1px solid color-mix(in srgb, var(--color-primary) 30%, transparent);
}

/* Buttons */
.glass-primary-btn {
  @apply px-4 py-2 rounded-lg;
  background: var(--gradient-primary);
  @apply text-white font-medium;
  /* Hover state handled by component */
  @apply transition-all duration-200;
  @apply shadow-lg;
  @apply flex items-center;
  @apply disabled:opacity-50 disabled:cursor-not-allowed;
}

.glass-secondary-btn {
  @apply px-4 py-2 rounded-lg;
  @apply bg-white/20 dark:bg-white/10;
  @apply text-gray-700 dark:text-gray-300;
  @apply hover:bg-white/30 dark:hover:bg-white/20;
  @apply transition-all duration-200;
  @apply border border-white/30;
  @apply flex items-center;
}

.glass-icon-btn {
  @apply p-2 rounded-lg;
  color: var(--text-secondary, #666);
  @apply hover:bg-white/20 dark:hover:bg-white/10;
  @apply transition-all duration-200;
  @apply backdrop-blur-sm;
  @apply w-8 h-8;
  @apply flex items-center justify-center;
}

/* Inputs */
.glass-input {
  @apply w-full px-3 py-2 rounded-lg;
  @apply bg-white/20 dark:bg-white/10;
  @apply border border-white/30;
  color: var(--text-primary, #333);
  @apply placeholder-gray-500 dark:placeholder-gray-400;
  outline: none;
  @apply transition-all duration-200;
}

/* Modal */
.glass-modal {
  @apply glass-effect;
  @apply rounded-xl;
  @apply p-6;
  @apply max-w-md w-full mx-4;
  color: var(--text-primary, #333);
}

/* Sidebar collapsed state fixes */
.glass-sidebar-panel-v2.collapsed .glass-nav-label {
  display: none !important;
}

.glass-sidebar-panel-v2.collapsed .glass-nav-btn,
.glass-sidebar-panel-v2.collapsed .glass-nav-btn-active {
  justify-content: center;
  padding-left: 0;
  padding-right: 0;
}

/* Premium Floating Panel */
.glass-panel-floating {
  @apply glass-effect;
  @apply rounded-2xl;
  @apply border border-white/20;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
  margin: 16px;
}

/* Premium Card - Enhanced glass card for widgets */
.glass-card-premium {
  @apply glass-effect;
  @apply rounded-xl;
  @apply border border-white/20;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
}

.dark .glass-card-premium {
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.15);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
}

/* Premium Icon Button */
.glass-icon-premium {
  @apply p-2 rounded-xl;
  color: var(--text-secondary, #666);
  @apply transition-all duration-300;
  @apply flex items-center justify-center;
  position: relative;
  overflow: hidden;
}

.glass-icon-premium::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at center, color-mix(in srgb, var(--color-primary, #B4833D) 20%, transparent) 0%, transparent 70%);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.glass-icon-premium:hover::after {
  opacity: 1;
}

/* Tooltip for Collapsed Sidebar - Fixed positioning to escape sidebar overflow */
.glass-tooltip-fixed {
  position: fixed;
  padding: 0.375rem 0.75rem;
  background: rgba(255, 255, 255, 0.95);
  color: rgb(31, 41, 55);
  font-size: 0.875rem;
  font-weight: 500;
  border-radius: 0.5rem;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  white-space: nowrap;
  pointer-events: none;
  z-index: 9999;
  backdrop-filter: blur(8px);
  animation: tooltipFadeIn 0.2s ease-out;
}

.dark .glass-tooltip-fixed {
  background: rgba(0, 0, 0, 0.95);
  color: rgb(229, 231, 235);
}

@keyframes tooltipFadeIn {
  from {
    opacity: 0;
    transform: translateY(-50%) translateX(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(-50%) translateX(0);
  }
}

/* Legacy tooltip for backwards compatibility */
.glass-tooltip {
  @apply absolute left-full ml-4 px-3 py-1.5;
  @apply bg-white/90 dark:bg-black/90;
  color: var(--text-primary, #333);
  @apply text-sm font-medium;
  @apply rounded-lg shadow-lg;
  @apply whitespace-nowrap;
  @apply pointer-events-none;
  @apply z-50;
  backdrop-filter: blur(8px);
  opacity: 0;
  transform: translateX(-10px);
  transition: all 0.2s ease;
}

.glass-nav-btn:hover .glass-tooltip {
  opacity: 1;
  transform: translateX(0);
}